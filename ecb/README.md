Copyright &copy; Kirk Rader 2024

# European Central Bank Exchange Rate Data

* `ecb.Datum` is a `struct` representing the exchange rate from a single
  currency to Euros.

  * `ecb.Datum.Currency` is an [ISO
    4217](https://en.wikipedia.org/wiki/ISO_4217) currency `string`

  * `ecb.Datum.Rate` is the exchange rate `float64` from that currency to Euros
    (`EUR`)

  * `ecb.Datum.Date` is the [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)
    date `string` from the `time` attribute in ECB's XML schema or the `Date`
    column in their CSV format[<sup>*<sup>](#dates)

  * `ecb.Datum.Timestamp` is the Unix timestamp

* `ecb.Data` is an alias for `[]ecb.Datum`.

* `ecb.Fetch(string, ecb.Parser)` gets data from the specified URL via HTTP and
  converts it to `ecb.Data` using the given parsing function.

* `ParseXML(io.Reader)` parses a XML document conforming to ECB's schema to
  produce `ecb.Data`.

* `ParseCSV(io.Reader)` parses a CSV document in ECB's format to produce
  `ecb.Data`.

The `ecb.Data` type is designed to be compatible with JSON, noSQL data stores,
etc. at the cost of some denormalization of the original ECB data.

Note that `ecb.ParseCSV(io.reader)` assumes that the contents is a Zip archive
containing one or more CSV files in ECB's format.

> _<a id="dates"><sup>*</sup></a> The ECB file formats are rather inconsistent
> in their treatment of date strings. The XML schema groups individual exchange
> rate elements inside a container element where the container has an attribute
> named `time`. Despite its name, the value of the `time` attribute is the date
> (and only the date) to which the enclosed exchange rate elements apply, in the
> ISO 8601 format (e.g. `2024-05-10`)._
>
> _Their CSV format contains a similar date string in a column named `Date` in
> each row. Depending on which CSV file is downloaded (daily vs. historical),
> the value in that `Date` column is either in the same format as that used for
> the `time` attribute in XML or else in a format like `10 May 2024`. The
> `ecb.ParseCSV(io.reader)` function in this library will accept either format
> but always uses the ISO 8601 format when populating `ecb.Datum.Date`._

---

## `go doc -all`

```
package ecb // import "parasaurolophus/go/ecb"


CONSTANTS

const (

        // URL for the exchange rate CSV data for the current day.
        DailyCSV = "https://www.ecb.europa.eu/stats/eurofxref/eurofxref.zip"

        // URL for the exchange rate XML data for the current day.
        DailyXML = "https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml"

        // URL for the historical exchange rate CSV data.
        HistoricalCSV = "https://www.ecb.europa.eu/stats/eurofxref/eurofxref-hist.zip"

        HistoricalXML = "https://www.ecb.europa.eu/stats/eurofxref/eurofxref-hist.xml"

        // URL for the exchange rate XML data for the last 90 days.
        NinetyDayXML = "https://www.ecb.europa.eu/stats/eurofxref/eurofxref-hist-90d.xml"
)

TYPES

type Data []Datum
    List of ECB exchange rate data.

func Fetch(url string, parser Parser) (Data, error)
    Fetch ECB exchange rate data from the given URL and parse it.

func ParseCSV(reader io.Reader) (Data, error)
    Parse the ECB CSV data from the given reader.

func ParseXML(reader io.Reader) (Data, error)
    Parse the ECB XML data from the given reader.

type Datum struct {

        // Unix time at which the ECB data was parsed.
        Timestamp int64 `json:"timestamp,omitempty"`

        // Value of time attribute in the ECB data.
        Date string `json:"time,omitempty"`

        // ISO-4217 currency id.
        Currency string `json:"currency,omitempty"`

        // Exchange rate from the given currency to euros on the date indicated
        // in the ECB data.
        Rate float64 `json:"rate,omitempty"`
}
    Exchange rate information for converting from a given currency to euros as
    converted from the ECB's data model to a Go struct.

    Note that Timestamp is generated by the Parser functions in this package
    while Time is copied (denormalized) from the ECB's data structures.
    Both are included so as to enable sanity checks and similar analyses,
    such as how frequently the data actually changes.

    See
    https://www.ecb.europa.eu/stats/policy_and_exchange_rates/euro_reference_exchange_rates/html/index.en.html

type Parser func(io.Reader) (Data, error)
    A function which parses ECB data from an io.Reader.
```
